import{c,o as i,a as o,F as $,r as h,t as u,g as b,_ as x,b as _,w as C,j as p,k as w,l as m,m as V,d as N,n as S,p as y}from"./CP8t3zjC.js";import{_ as A}from"./BCTlTcU0.js";import{u as k}from"./BiiRcpzQ.js";const P={style:{display:"flex",gap:"12px","align-items":"center","margin-bottom":"16px"}},j=["value"],B=["value"],F=["value"],I=["value"],L={__name:"SearchBar",props:{modelValue:String,category:String,sort:String,categories:Array},emits:["update:modelValue","update:category","update:sort"],setup(n){return(l,a)=>(i(),c("div",P,[o("input",{class:"input",value:n.modelValue,onInput:a[0]||(a[0]=e=>l.$emit("update:modelValue",e.target.value)),placeholder:"Rechercher un produit…",style:{flex:"1"}},null,40,j),o("select",{class:"input",style:{"max-width":"220px"},value:n.category,onChange:a[1]||(a[1]=e=>l.$emit("update:category",e.target.value))},[a[3]||(a[3]=o("option",{value:""},"Toutes catégories",-1)),(i(!0),c($,null,h(n.categories,e=>(i(),c("option",{key:e,value:e},u(e),9,F))),128))],40,B),o("select",{class:"input",style:{"max-width":"180px"},value:n.sort,onChange:a[2]||(a[2]=e=>l.$emit("update:sort",e.target.value))},[...a[4]||(a[4]=[b('<option value="">Tri: défaut</option><option value="price-asc">Prix ↑</option><option value="price-desc">Prix ↓</option><option value="name-asc">Nom A→Z</option><option value="name-desc">Nom Z→A</option>',5)])],40,I)]))}},T={class:"card"},q=["src","alt"],D={class:"name"},U={class:"badge"},M={class:"row"},Z={class:"price"},E={__name:"ProductCard",props:{product:Object},setup(n){const{addToCart:l}=k();return(a,e)=>{const d=A;return i(),c("div",T,[_(d,{to:`/product/${n.product.id}`},{default:C(()=>[o("img",{src:n.product.image,alt:n.product.name,class:"thumb"},null,8,q)]),_:1},8,["to"]),o("h3",D,u(n.product.name),1),o("p",U,u(n.product.category),1),o("div",M,[o("span",Z,u(n.product.price.toFixed(2))+" €",1),o("button",{class:"btn",onClick:e[0]||(e[0]=v=>p(l)(n.product))},"Ajouter")])])}}},O=x(E,[["__scopeId","data-v-672e0094"]]),Q={class:"grid grid-cols-3"},R={__name:"ProductList",props:{products:{type:Array,default:()=>[]}},setup(n){return(l,a)=>(i(),c("div",Q,[(i(!0),c($,null,h(n.products,e=>(i(),w(O,{key:e.id,product:e},null,8,["product"]))),128))]))}},z={style:{position:"relative"}},G={key:0,class:"drawer"},H={key:0,class:"empty"},J={key:1,class:"list"},K={class:"left"},W={class:"name"},X={class:"price"},Y={class:"right"},tt=["value","onInput"],et=["onClick"],ot={class:"total"},st={__name:"CartDrawer",setup(n){const l=m(!1),{cart:a,total:e,remove:d,setQty:v,count:g}=k();return(f,s)=>(i(),c("div",z,[o("button",{class:"btn",onClick:s[0]||(s[0]=t=>l.value=!l.value)},"Panier ("+u(p(g))+")",1),l.value?(i(),c("div",G,[s[2]||(s[2]=o("h3",{style:{margin:"0 0 8px"}},"Votre panier",-1)),p(a).length===0?(i(),c("div",H,"Vide.")):(i(),c("ul",J,[(i(!0),c($,null,h(p(a),t=>(i(),c("li",{key:t.id,class:"line"},[o("div",K,[o("span",W,u(t.name),1),o("span",X,u((t.price*t.qty).toFixed(2))+" €",1)]),o("div",Y,[o("input",{class:"qty",type:"number",min:"1",value:t.qty,onInput:r=>p(v)(t.id,r.target.value)},null,40,tt),o("button",{class:"btn-link",onClick:r=>p(d)(t.id)},"✕",8,et)])]))),128))])),o("div",ot,[s[1]||(s[1]=N("Total : ",-1)),o("b",null,u(p(e).toFixed(2))+" €",1)])])):V("",!0)]))}},at=x(st,[["__scopeId","data-v-18988d94"]]),nt={class:"container"},rt={class:"header"},ut={__name:"index",setup(n){const l=m([]),a=m(""),e=m(""),d=m("");S(async()=>{const s=await fetch("products.json");l.value=await s.json()});const v=y(()=>Array.from(new Set(l.value.map(s=>s.category)))),g=y(()=>{let s=l.value.filter(t=>t.name.toLowerCase().includes(a.value.toLowerCase())&&(!e.value||t.category===e.value));switch(d.value){case"price-asc":s=s.sort((t,r)=>t.price-r.price);break;case"price-desc":s=s.sort((t,r)=>r.price-t.price);break;case"name-asc":s=s.sort((t,r)=>t.name.localeCompare(r.name));break;case"name-desc":s=s.sort((t,r)=>r.name.localeCompare(t.name));break}return s}),f=y(()=>g.value);return(s,t)=>(i(),c("div",nt,[o("header",rt,[t[3]||(t[3]=o("h1",null,"Mini e-commerce",-1)),_(at)]),_(L,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),category:e.value,sort:d.value,categories:v.value,"onUpdate:category":t[1]||(t[1]=r=>e.value=r),"onUpdate:sort":t[2]||(t[2]=r=>d.value=r)},null,8,["modelValue","category","sort","categories"]),_(R,{products:f.value},null,8,["products"])]))}};export{ut as default};
