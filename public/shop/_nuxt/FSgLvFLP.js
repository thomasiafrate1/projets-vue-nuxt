import{c as u,o as i,a as e,F as f,r as x,t as c,g as k,_ as b,b as _,w as C,j as p,k as w,l as m,m as V,d as N,n as S,p as j,q as y}from"./C9iABz_t.js";import{_ as A}from"./BXLevKNx.js";import{u as h}from"./CEN-n8WV.js";const L={style:{display:"flex",gap:"12px","align-items":"center","margin-bottom":"16px"}},P=["value"],B=["value"],F=["value"],I=["value"],T={__name:"SearchBar",props:{modelValue:String,category:String,sort:String,categories:Array},emits:["update:modelValue","update:category","update:sort"],setup(n){return(l,a)=>(i(),u("div",L,[e("input",{class:"input",value:n.modelValue,onInput:a[0]||(a[0]=o=>l.$emit("update:modelValue",o.target.value)),placeholder:"Rechercher un produit…",style:{flex:"1"}},null,40,P),e("select",{class:"input",style:{"max-width":"220px"},value:n.category,onChange:a[1]||(a[1]=o=>l.$emit("update:category",o.target.value))},[a[3]||(a[3]=e("option",{value:""},"Toutes catégories",-1)),(i(!0),u(f,null,x(n.categories,o=>(i(),u("option",{key:o,value:o},c(o),9,F))),128))],40,B),e("select",{class:"input",style:{"max-width":"180px"},value:n.sort,onChange:a[2]||(a[2]=o=>l.$emit("update:sort",o.target.value))},[...a[4]||(a[4]=[k('<option value="">Tri: défaut</option><option value="price-asc">Prix ↑</option><option value="price-desc">Prix ↓</option><option value="name-asc">Nom A→Z</option><option value="name-desc">Nom Z→A</option>',5)])],40,I)]))}},q={class:"card"},R=["src","alt"],U={class:"name"},D={class:"badge"},M={class:"row"},Z={class:"price"},E={__name:"ProductCard",props:{product:Object},setup(n){const{addToCart:l}=h();return(a,o)=>{const d=A;return i(),u("div",q,[_(d,{to:`/product/${n.product.id}`},{default:C(()=>[e("img",{src:n.product.image,alt:n.product.name,class:"thumb"},null,8,R)]),_:1},8,["to"]),e("h3",U,c(n.product.name),1),e("p",D,c(n.product.category),1),e("div",M,[e("span",Z,c(n.product.price.toFixed(2))+" €",1),e("button",{class:"btn",onClick:o[0]||(o[0]=v=>p(l)(n.product))},"Ajouter")])])}}},O=b(E,[["__scopeId","data-v-672e0094"]]),Q={class:"grid grid-cols-3"},z={__name:"ProductList",props:{products:{type:Array,default:()=>[]}},setup(n){return(l,a)=>(i(),u("div",Q,[(i(!0),u(f,null,x(n.products,o=>(i(),w(O,{key:o.id,product:o},null,8,["product"]))),128))]))}},G={style:{position:"relative"}},H={key:0,class:"drawer"},J={key:0,class:"empty"},K={key:1,class:"list"},W={class:"left"},X={class:"name"},Y={class:"price"},tt={class:"right"},et=["value","onInput"],ot=["onClick"],st={class:"total"},at={__name:"CartDrawer",setup(n){const l=m(!1),{cart:a,total:o,remove:d,setQty:v,count:g}=h();return($,s)=>(i(),u("div",G,[e("button",{class:"btn",onClick:s[0]||(s[0]=t=>l.value=!l.value)},"Panier ("+c(p(g))+")",1),l.value?(i(),u("div",H,[s[2]||(s[2]=e("h3",{style:{margin:"0 0 8px"}},"Votre panier",-1)),p(a).length===0?(i(),u("div",J,"Vide.")):(i(),u("ul",K,[(i(!0),u(f,null,x(p(a),t=>(i(),u("li",{key:t.id,class:"line"},[e("div",W,[e("span",X,c(t.name),1),e("span",Y,c((t.price*t.qty).toFixed(2))+" €",1)]),e("div",tt,[e("input",{class:"qty",type:"number",min:"1",value:t.qty,onInput:r=>p(v)(t.id,r.target.value)},null,40,et),e("button",{class:"btn-link",onClick:r=>p(d)(t.id)},"✕",8,ot)])]))),128))])),e("div",st,[s[1]||(s[1]=N("Total : ",-1)),e("b",null,c(p(o).toFixed(2))+" €",1)])])):V("",!0)]))}},nt=b(at,[["__scopeId","data-v-18988d94"]]),rt={class:"container"},lt={class:"header"},dt={__name:"index",setup(n){const l=m([]),a=m(""),o=m(""),d=m("");S(async()=>{const s=j().app.baseURL||"/",t=await fetch(s+"products.json");l.value=await t.json()});const v=y(()=>Array.from(new Set(l.value.map(s=>s.category)))),g=y(()=>{let s=l.value.filter(t=>t.name.toLowerCase().includes(a.value.toLowerCase())&&(!o.value||t.category===o.value));switch(d.value){case"price-asc":s=s.sort((t,r)=>t.price-r.price);break;case"price-desc":s=s.sort((t,r)=>r.price-t.price);break;case"name-asc":s=s.sort((t,r)=>t.name.localeCompare(r.name));break;case"name-desc":s=s.sort((t,r)=>r.name.localeCompare(t.name));break}return s}),$=y(()=>g.value);return(s,t)=>(i(),u("div",rt,[t[4]||(t[4]=e("div",{style:{"margin-bottom":"12px"}},[e("a",{href:"/",class:"btn",style:{background:"#475569"}},"← Retour aux projets")],-1)),e("header",lt,[t[3]||(t[3]=e("h1",null,"Mini e-commerce",-1)),_(nt)]),_(T,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),category:o.value,sort:d.value,categories:v.value,"onUpdate:category":t[1]||(t[1]=r=>o.value=r),"onUpdate:sort":t[2]||(t[2]=r=>d.value=r)},null,8,["modelValue","category","sort","categories"]),_(z,{products:$.value},null,8,["products"])]))}};export{dt as default};
